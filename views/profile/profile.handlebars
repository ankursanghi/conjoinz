{{#extend "mainLayoutPartial"}}
{{#content "head" mode="append"}}
<!-- SWIPER SLIDER -->
<link href="assets/plugins/slider.swiper/dist/css/swiper.min.css" rel="stylesheet" type="text/css" />
<link href="assets/css/layout-datatables.css" rel="stylesheet" type="text/css" />

<link href="https://code.jquery.com/ui/1.11.4/themes/ui-darkness/jquery-ui.css" rel="stylesheet" type="text/css" />
{{/content}}
{{#content "loggedIn"}}
{{> settings_dropdown}} 
{{/content}}
{{#content "mainbody"}}
<section style="background:url('assets/images/demo/wall2.jpg')">	
<section>
<div class="container">

	<!-- RIGHT -->
	<div class="col-lg-9 col-md-9 col-sm-8 margin-bottom-80">

		<ul class="nav nav-tabs nav-top-border">
			<li class="active"><a href="#preferences" data-toggle="tab">Personal Info</a></li>
			<!-- <li><a href="#avatar" data-toggle="tab">Avatar</a></li> -->
			<li><a href="#password" data-toggle="tab">Password</a></li>
			<!-- <li><a href="#privacy" data-toggle="tab">Privacy</a></li> -->
		</ul>

		<div class="tab-content margin-top-20">

			<!-- PERSONAL INFO TAB -->
			<div class="tab-pane fade in active" id="preferences">
				{{#if error}}
				<div class="alert alert-danger margin-bottom-30"><!-- SUCCESS -->
					<button type="button" class="close" data-dismiss="alert">
						<span aria-hidden="true">×</span>
						<span class="sr-only">Close</span>
					</button>
					<strong>Boo hoo!</strong> You have already used that Nick. Please use a different nick.
				</div>
				{{else}}
				{{#if saved}}
				<div class="alert alert-success margin-bottom-30"><!-- SUCCESS -->
					<button type="button" class="close" data-dismiss="alert">
						<span aria-hidden="true">×</span>
						<span class="sr-only">Close</span>
					</button>
					<strong>Well done!</strong> You successfully saved {{saved}}. To further edit, reselect the Nickname from the dropdown.
				</div>
				{{/if}}
				{{/if}}

				<form id="profileform" class="clearfix validate" action="#" method="post" enctype="multipart/form-data">
					<div class="form-group">
						<div class="row">
							<div class="col-lg-12 col-md-9 col-sm-9">
								<label for="address">Choose an address nick to edit or create a new one*</label>
								<select id="address" name="address" class="form-control">
									<option value="9new9">--- Create a new one ---</option>
								</select>
							</div>
						</div>	
						<div class="row">
							<div class="col-lg-12 col-md-9 col-sm-9">
								<label for="adrnick">Nick name</label>
								<input id="adrnick" name="adrnick" type="text" class="form-control margin-top-10 required" placeholder="Address Nickname" />
								<label for="billing_address1">Address *</label>
								<input id="billing_address1" name="billing[address][]" type="text" class="form-control required" placeholder="Address 1" />
								<input id="billing_address2" name="billing[address][]" type="text" class="form-control margin-top-10" placeholder="Address 2" />
								<div class="row">
									<div class="col-md-6a col-sm-6">
										<label for="billing_city">City *</label>
										<input id="billing_city" name="billing[city]" type="text" class="form-control required" />
									</div>
									<div class="col-md-6 col-sm-6">
										<label for="billing_state">State/Province *</label>
										<select id="billing_state" name="billing[state]" class="form-control pointer required">
											<option value="">Select...</option>
											<option value="AL">Alabama</option>
											<option value="AK">Alaska</option>
											<option value="AZ">Arizona</option>
											<option value="AR">Arkansas</option>
											<option value="CA">California</option>
											<option value="CO">Colorado</option>
											<option value="CT">Connecticut</option>
											<option value="DE">Delaware</option>
											<option value="DC">District Of Columbia</option>
											<option value="FL">Florida</option>
											<option value="GA">Georgia</option>
											<option value="HI">Hawaii</option>
											<option value="ID">Idaho</option>
											<option value="IL">Illinois</option>
											<option value="IN">Indiana</option>
											<option value="IA">Iowa</option>
											<option value="KS">Kansas</option>
											<option value="KY">Kentucky</option>
											<option value="LA">Louisiana</option>
											<option value="ME">Maine</option>
											<option value="MD">Maryland</option>
											<option value="MA">Massachusetts</option>
											<option value="MI">Michigan</option>
											<option value="MN">Minnesota</option>
											<option value="MS">Mississippi</option>
											<option value="MO">Missouri</option>
											<option value="MT">Montana</option>
											<option value="NE">Nebraska</option>
											<option value="NV">Nevada</option>
											<option value="NH">New Hampshire</option>
											<option value="NJ">New Jersey</option>
											<option value="NM">New Mexico</option>
											<option value="NY">New York</option>
											<option value="NC">North Carolina</option>
											<option value="ND">North Dakota</option>
											<option value="OH">Ohio</option>
											<option value="OK">Oklahoma</option>
											<option value="OR">Oregon</option>
											<option value="PA">Pennsylvania</option>
											<option value="RI">Rhode Island</option>
											<option value="SC">South Carolina</option>
											<option value="SD">South Dakota</option>
											<option value="TN">Tennessee</option>
											<option value="TX">Texas</option>
											<option value="UT">Utah</option>
											<option value="VT">Vermont</option>
											<option value="VA">Virginia</option>
											<option value="WA">Washington</option>
											<option value="WV">West Virginia</option>
											<option value="WI">Wisconsin</option>
											<option value="WY">Wyoming</option>
										</select>
									</div>
								</div>
								<div class="row">
									<div class="col-md-6a col-sm-6">
										<label for="billing_zipcode">Zip/Postal Code *</label>
										<input id="billing_zipcode" name="billing[zipcode]" type="text" class="form-control required" />
									</div>
									<div class="col-md-6 col-sm-6">
										<label for="billing_country">Country *</label>
										<select id="billing_country" name="billing[country]" class="form-control pointer required">
											<option value="">Select...</option>
											<option value="USA">United States</option>
										</select>
									</div>
								</div>
								<div class="row">
									<div class="col-md-6a col-sm-6">
										<label for="billing_phone">Phone *</label>
										<input id="billing_phone" name="billing[phone]" type="text" class="form-control required" />
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="margiv-top10">
						<button type="submit" class="btn btn-success">Save Changes</button>
						<button type="button" class="btn btn-default">Cancel</button>
					</div>
				</form>
			</div>
			<!-- /PERSONAL INFO TAB -->

			<!-- AVATAR TAB -->
			<div class="tab-pane fade" id="avatar">

				<form class="clearfix" action="#" method="post" enctype="multipart/form-data">
					<div class="form-group">
						<div class="row">

							<div class="col-md-3 col-sm-4">

								<div class="thumbnail">
									<img class="img-responsive" src="assets/images/demo/people/460x700/8-min.jpg" alt="" />
								</div>

							</div>

							<div class="col-md-9 col-sm-8">

								<div class="sky-form nomargin">
									<label class="label">Select File</label>
									<label for="file" class="input input-file">
										<div class="button">
											<input type="file" id="file" onchange="this.parentNode.nextSibling.value = this.value">Browse
										</div><input type="text" readonly>
									</label>
								</div>

								<a href="#" class="btn btn-danger btn-xs noradius"><i class="fa fa-times"></i> Remove Avatar</a>

								<div class="clearfix margin-top-20">
									<span class="label label-warning">NOTE! </span>
									<p>
									Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt laoreet!
									</p>
								</div>

							</div>

						</div>

					</div>

					<div class="margiv-top10">
						<a href="#" class="btn btn-primary">Save Changes </a>
						<a href="#" class="btn btn-default">Cancel </a>
					</div>

				</form>

			</div>
			<!-- /AVATAR TAB -->

			<!-- PASSWORD TAB -->
			<div class="tab-pane fade" id="password">

				<form action="#" method="post">

					<div class="form-group">
						<label class="control-label">Current Password</label>
						<input type="password" class="form-control">
					</div>
					<div class="form-group">
						<label class="control-label">New Password</label>
						<input type="password" class="form-control">
					</div>
					<div class="form-group">
						<label class="control-label">Re-type New Password</label>
						<input type="password" class="form-control">
					</div>

					<div class="margiv-top10">
						<a href="#" class="btn btn-primary"><i class="fa fa-check"></i> Change Password</a>
						<a href="#" class="btn btn-default">Cancel </a>
					</div>

				</form>

			</div>
			<!-- /PASSWORD TAB -->

			<!-- PRIVACY TAB -->
			<div class="tab-pane fade" id="privacy">

				<form action="#" method="post">
					<div class="sky-form">

						<table class="table table-bordered table-striped">
							<tbody>
								<tr>
									<td>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam.</td>
									<td>
										<div class="inline-group">
											<label class="radio nomargin-top nomargin-bottom">
												<input type="radio" name="radioOption" checked=""><i></i> Yes
											</label>

											<label class="radio nomargin-top nomargin-bottom">
												<input type="radio" name="radioOption" checked=""><i></i> No
											</label>
										</div>
									</td>
								</tr>
								<tr>
									<td>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam.</td>
									<td>
										<label class="checkbox nomargin">
											<input type="checkbox" name="checkbox" checked=""><i></i> Yes
										</label>
									</td>
								</tr>
								<tr>
									<td>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam.</td>
									<td>
										<label class="checkbox nomargin">
											<input type="checkbox" name="checkbox" checked=""><i></i> Yes
										</label>
									</td>
								</tr>
								<tr>
									<td>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam.</td>
									<td> <label class="checkbox nomargin">
											<input type="checkbox" name="checkbox" checked=""><i></i> Yes
										</label>
									</td>
								</tr>
							</tbody>
						</table>

					</div>

					<div class="margin-top-10">
						<a href="#" class="btn btn-primary"><i class="fa fa-check"></i> Save Changes </a>
						<a href="#" class="btn btn-default">Cancel </a>
					</div>

				</form>
			</div>
		</div>
	</div>

</div>
</section>
<!-- / -->
{{/content}}
{{#content "scripts" mode="append"}}
<script>
	$( document ).ready(function(){
		var dataURL = '/api';
		$.ajax({
			dataType: "json",
			url: dataURL+'/getaddrs',
			success: function(data){
				$.each(data, function(arrayID, adrObj){
					var divData = '<option value='+'"'+adrObj.adr_nick+'">'+adrObj.adr_nick+'</option>';
					$(divData).appendTo("#address");
				});
			}
		});
	});
</script>
<script type="text/javascript" src="assets/plugins/form.validate/jquery.validate.js"></script>
<script type="text/javascript" src="assets/plugins/form.validate/jquery.form.min.js"></script>
<script type="text/javascript" src="assets/plugins/form.validate/additional-methods.js"></script>
<script>
	$.validator.setDefaults({
		success: "valid"
	});
	$().ready(function(){
		jQuery("#profileform").validate({
			rules:{
				adrnick: "required",
			}
		});
	});
	$("#address").change(function(){
		var encodedAddressName= encodeURIComponent($("#address").val());
		$.ajax({
			dataType: "json",
			url: 'api/getaddrs?adrnick='+encodedAddressName,
			success: function(data){
				$("#billing_address1").val(data.adr_line1);
				$("#billing_address2").val(data.adr_line2);
				$("#billing_city").val(data.city);
				$("#billing_state").val(data.state);
				$("#billing_zipcode").val(data.zip);
				$("#billing_country").val(data.country);
				$("#billing_phone").val(data.phone);
				$("#adrnick").val(data.adr_nick);
				if (!(encodedAddressName == '9new9')){
					$("#adrnick").prop('disabled', true);
					}else{
					$("#adrnick").prop('disabled', false);
				}
			}
		});
	});
</script>
{{/content}}
{{/extend}}
